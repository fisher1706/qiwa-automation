{"name": "test_add_access_to_establishment", "status": "passed", "steps": [{"name": "login_as_user", "status": "passed", "steps": [{"name": "Login '1001530987' via Laborer SSO API", "status": "passed", "steps": [{"name": "[200] POST /oauth/init", "status": "passed", "attachments": [{"name": "JSON Request body", "source": "8f829093-2b78-4de7-957d-b832d768d160-attachment.json", "type": "application/json"}, {"name": "JSON Response body", "source": "b8f7a027-17d9-4f3b-8178-ac6cbad2055c-attachment.json", "type": "application/json"}], "start": 1703165871224, "stop": 1703165871226}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165871227, "stop": 1703165871227}, {"name": "login", "status": "passed", "steps": [{"name": "[200] POST /session/login", "status": "passed", "attachments": [{"name": "JSON Request body", "source": "401366ef-baa5-4f08-8f0f-bd9f6497c817-attachment.json", "type": "application/json"}, {"name": "JSON Response body", "source": "a51396ba-648e-4fca-9286-94779f2a919a-attachment.json", "type": "application/json"}], "start": 1703165872507, "stop": 1703165872551}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165872552, "stop": 1703165872552}], "parameters": [{"name": "login", "value": "'1001530987'"}, {"name": "password", "value": "'123456789aA@'"}, {"name": "expected_code", "value": "200"}], "start": 1703165871227, "stop": 1703165872552}, {"name": "login_with_otp", "status": "passed", "steps": [{"name": "[200] POST /session/login-with-otp", "status": "passed", "attachments": [{"name": "JSON Request body", "source": "72a6f416-3af7-4e50-9ea3-8da7c241fbe3-attachment.json", "type": "application/json"}, {"name": "JSON Response body", "source": "ef4a2295-21a9-4298-a465-36170f652d81-attachment.json", "type": "application/json"}], "start": 1703165873138, "stop": 1703165873139}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165873139, "stop": 1703165873139}], "parameters": [{"name": "otp_code", "value": "'0000'"}, {"name": "expected_code", "value": "200"}], "start": 1703165872552, "stop": 1703165873139}, {"name": "[302] POST /authorize?client_id=qiwa&redirect_uri=https%3A%2F%2Fauth.qiwa.info%2Foauth%2Fcallback&response_type=code&scope=openid+email+phone+profile&code_challenge_method=S256&state=9F6qkjvBI5NLxaAgVYWYBsVcXxOT_mRJD0Di3WfQmUs&code_challenge=qg27M2vumIo5e-dg1kOT_t50qZBHFMBRaWXLg62DZ3M", "status": "passed", "start": 1703165873328, "stop": 1703165873328}, {"name": "Assert that status_code equals 302", "status": "passed", "start": 1703165873330, "stop": 1703165873330}, {"name": "[200] POST /oauth/callback", "status": "passed", "attachments": [{"name": "JSON Request body", "source": "dbe52c85-b785-4eda-aebf-e70f0a4ad934-attachment.json", "type": "application/json"}, {"name": "JSON Response body", "source": "5313c8dd-1d28-4e1d-9f3c-7aa565a69da2-attachment.json", "type": "application/json"}], "start": 1703165874220, "stop": 1703165874222}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165874224, "stop": 1703165874224}], "parameters": [{"name": "personal_number", "value": "'1001530987'"}, {"name": "password", "value": "'123456789aA@'"}], "start": 1703165870291, "stop": 1703165874224}], "parameters": [{"name": "personal_number", "value": "'1001530987'"}, {"name": "password", "value": "'123456789aA@'"}], "start": 1703165870290, "stop": 1703165874224}, {"name": "select_company", "status": "passed", "steps": [{"name": "select_company_with_sequence_number", "status": "passed", "steps": [{"name": "get_workspaces", "status": "passed", "steps": [{"name": "[200] GET /context/workspaces", "status": "passed", "attachments": [{"name": "JSON Response body", "source": "abaf845c-367d-4054-996f-08ab4c920287-attachment.json", "type": "application/json"}], "start": 1703165875347, "stop": 1703165875350}], "start": 1703165874224, "stop": 1703165875351}, {"name": "select_company_by_id", "status": "passed", "steps": [{"name": "[200] PATCH /context/company/12653", "status": "passed", "start": 1703165876575, "stop": 1703165876576}], "parameters": [{"name": "company_id", "value": "12653"}, {"name": "status_code", "value": "200"}], "start": 1703165875351, "stop": 1703165876577}], "parameters": [{"name": "number", "value": "11871"}], "start": 1703165874224, "stop": 1703165876577}], "parameters": [{"name": "sequence_number", "value": "11871"}], "start": 1703165874224, "stop": 1703165876577}, {"name": "[200] GET /context", "status": "passed", "attachments": [{"name": "JSON Response body", "source": "f78208af-895a-4179-9df0-b0c87e1341bd-attachment.json", "type": "application/json"}], "start": 1703165876759, "stop": 1703165876761}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165876762, "stop": 1703165876762}, {"name": "open_user_management_page", "status": "passed", "start": 1703165876762, "stop": 1703165877657}, {"name": "element('xpath', \"//div[contains(@data-testid, 'user-table')]//tbody\"): should be visible", "status": "passed", "start": 1703165877665, "stop": 1703165886909}, {"name": "change_local", "status": "passed", "steps": [{"name": "change_local", "status": "passed", "steps": [{"name": "element('xpath', '//*[@data-component=\"Navigation\"]//p[contains(text(), \"AR\") or contains(text(), \"EN\") or contains(text(), \"ع\")]'): click", "status": "passed", "start": 1703165886910, "stop": 1703165886989}, {"name": "element('xpath', '//p[contains(text(), \"English (EN)\")]'): click", "status": "passed", "start": 1703165886989, "stop": 1703165887041}], "parameters": [{"name": "language", "value": "'en'"}], "start": 1703165886910, "stop": 1703165887042}], "parameters": [{"name": "a", "value": "(<src.ui.components.header.Header object at 0x113a29cc0>, 'en')"}], "start": 1703165886910, "stop": 1703165887042}, {"name": "[200] GET /api/bff/users/1070111305/establishments?active=True", "status": "passed", "attachments": [{"name": "JSON Response body", "source": "9c8e4a5c-f32b-4b45-af15-e40b4c81f745-attachment.json", "type": "application/json"}], "start": 1703165887677, "stop": 1703165887679}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165887680, "stop": 1703165887680}, {"name": "[200] GET /api/bff/users/1070111305/establishments?active=True", "status": "passed", "attachments": [{"name": "JSON Response body", "source": "852ced40-e364-4ee1-a7e4-245ee8fa9754-attachment.json", "type": "application/json"}], "start": 1703165887899, "stop": 1703165887901}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165887901, "stop": 1703165887901}, {"name": "navigate_to_user_details", "status": "passed", "steps": [{"name": "open_user_details_page", "status": "passed", "parameters": [{"name": "personal_number", "value": "'1070111305'"}], "start": 1703165887902, "stop": 1703165888122}, {"name": "element('xpath', \"//div[contains(@data-testid, 'about-user-block')]//p[2]\").element('xpath', '//div[1]/div[1]/p[2]'): should be visible", "status": "passed", "start": 1703165888122, "stop": 1703165889247}, {"name": "element('xpath', \"//div[contains(@data-testid, 'about-user-block')]//p[2]\").element('xpath', '//div[2]/div[2]/p[2]'): should be visible", "status": "passed", "start": 1703165889247, "stop": 1703165889265}, {"name": "element('xpath', \"//div[contains(@data-testid, 'about-user-block')]//p[2]\").element('xpath', '//div[1]/div[2]/p[2]'): should be visible", "status": "passed", "start": 1703165889265, "stop": 1703165889283}, {"name": "element('xpath', \"//div[contains(@data-testid, 'about-user-block')]//p[2]\").element('xpath', '//div[2]/div[1]/p[2]'): should be visible", "status": "passed", "start": 1703165889283, "stop": 1703165889301}], "parameters": [{"name": "personal_number", "value": "'1070111305'"}], "start": 1703165887902, "stop": 1703165889301}, {"name": "open_select_privileges_modal_for_no_access_workspace", "status": "passed", "steps": [{"name": "all(\"[role='tablist'] button\").element_by(has text No access): click", "status": "passed", "start": 1703165889301, "stop": 1703165890426}, {"name": "all(\"[role='tablist'] button\").element_by(has text No access): should have attribute 'aria-selected' with value 'true'", "status": "passed", "start": 1703165890426, "stop": 1703165890456}, {"name": "element(\"[data-testid='tab-no-allow']\").element('tbody').all('tr').element_by(has text 1910).element(\"[data-testid='link-toggler-showAddPrivileges']\"): click", "status": "passed", "start": 1703165890456, "stop": 1703165891710}, {"name": "element(\"[data-testid='modal-add-privileges']\"): should be visible", "status": "passed", "start": 1703165891710, "stop": 1703165891727}], "parameters": [{"name": "establishment", "value": "'1910'"}], "start": 1703165889301, "stop": 1703165891727}, {"name": "add_access_with_fundamental_privileges", "status": "passed", "steps": [{"name": "element(\"[data-testid='modal-add-privileges']\").element(\"[data-testid='add-access-button']\"): click", "status": "passed", "start": 1703165891728, "stop": 1703165891781}, {"name": "element(\"[data-component='Toast']\"): should be not (visible)", "status": "passed", "start": 1703165891782, "stop": 1703165891794}, {"name": "check_establishment_is_added_to_table", "status": "passed", "steps": [{"name": "all(\"[role='tablist'] button\").element_by(has text Allowed access): click", "status": "passed", "start": 1703165891794, "stop": 1703165892907}, {"name": "all(\"[role='tablist'] button\").element_by(has text Allowed access): should have attribute 'aria-selected' with value 'true'", "status": "passed", "start": 1703165892907, "stop": 1703165892928}, {"name": "element(\"[data-testid='tab-allow']\").element('tbody').all('tr').element_by(has text 1910): should be visible", "status": "passed", "start": 1703165892928, "stop": 1703165893346}], "parameters": [{"name": "tab_name", "value": "'Allowed access'"}, {"name": "establishment_row", "value": "<selene.core.entity.Element object at 0x113d5a530>"}], "start": 1703165891794, "stop": 1703165893346}, {"name": "all(\"[role='tablist'] button\").element_by(has text No access): click", "status": "passed", "start": 1703165893346, "stop": 1703165893395}, {"name": "all(\"[role='tablist'] button\").element_by(has text No access): should have attribute 'aria-selected' with value 'true'", "status": "passed", "start": 1703165893395, "stop": 1703165893419}, {"name": "element(\"[data-testid='tab-no-allow']\").element('tbody').all('tr').element_by(has text 1910): should be not (visible)", "status": "passed", "start": 1703165893419, "stop": 1703165893440}], "parameters": [{"name": "establishment", "value": "'1910'"}], "start": 1703165891727, "stop": 1703165893440}, {"name": "open_select_privileges_modal_for_no_access_workspace", "status": "passed", "steps": [{"name": "all(\"[role='tablist'] button\").element_by(has text No access): click", "status": "passed", "start": 1703165893440, "stop": 1703165893477}, {"name": "all(\"[role='tablist'] button\").element_by(has text No access): should have attribute 'aria-selected' with value 'true'", "status": "passed", "start": 1703165893477, "stop": 1703165893501}, {"name": "element(\"[data-testid='tab-no-allow']\").element('tbody').all('tr').element_by(has text 2722).element(\"[data-testid='link-toggler-showAddPrivileges']\"): click", "status": "passed", "start": 1703165893501, "stop": 1703165893610}, {"name": "element(\"[data-testid='modal-add-privileges']\"): should be visible", "status": "passed", "start": 1703165893610, "stop": 1703165893627}], "parameters": [{"name": "establishment", "value": "'2722'"}], "start": 1703165893440, "stop": 1703165893627}, {"name": "add_access_with_not_fundamental_privileges", "status": "passed", "steps": [{"name": "all(\"[data-component='Checkbox']\").element_by(has text Visa Issuance Service): click", "status": "passed", "start": 1703165893627, "stop": 1703165893729}, {"name": "all(\"[data-component='Checkbox']\").element_by(has text Wage Disbursement): click", "status": "passed", "start": 1703165893729, "stop": 1703165893826}, {"name": "element(\"[data-testid='modal-add-privileges']\").element(\"[data-testid='add-access-button']\"): click", "status": "passed", "start": 1703165893826, "stop": 1703165893865}, {"name": "element(\"[data-component='Toast']\"): should have text You have successfully added access to فرع شركةالاتحادالهندسي السعوديةللاستشارات الهندسية||(خطيب و for this Workspace User.", "status": "passed", "start": 1703165893865, "stop": 1703165894396}, {"name": "element(\"[data-component='Toast']\"): should be not (visible)", "status": "passed", "start": 1703165894396, "stop": 1703165900301}, {"name": "element(\"[data-testid='tab-no-allow']\").element('tbody').all('tr').element_by(has text 2722): should be not (visible)", "status": "passed", "start": 1703165900301, "stop": 1703165900306}], "parameters": [{"name": "user", "value": "User(personal_number='1070111305', labor_office_id='15', sequence_number='2722', office_id=None, establishment_name_ar='فرع شركةالاتحادالهندسي السعوديةللاستشارات الهندسية||(خطيب و', establishment_number=None, occupation=None, name=None, user_id=1668068, unified_number_id=9086, establishment_id=None)"}], "start": 1703165893627, "stop": 1703165900306}, {"name": "check_privileges_after_add_access_with_not_fundamental_privileges", "status": "passed", "steps": [{"name": "check_establishment_is_added_to_table", "status": "passed", "steps": [{"name": "all(\"[role='tablist'] button\").element_by(has text Allowed access): click", "status": "passed", "start": 1703165900306, "stop": 1703165900341}, {"name": "all(\"[role='tablist'] button\").element_by(has text Allowed access): should have attribute 'aria-selected' with value 'true'", "status": "passed", "start": 1703165900341, "stop": 1703165900359}, {"name": "element(\"[data-testid='tab-allow']\").element('tbody').all('tr').element_by(has text 2722): should be visible", "status": "passed", "start": 1703165900359, "stop": 1703165900403}], "parameters": [{"name": "tab_name", "value": "'Allowed access'"}, {"name": "establishment_row", "value": "<selene.core.entity.Element object at 0x113dac190>"}], "start": 1703165900306, "stop": 1703165900403}, {"name": "element(\"[data-testid='tab-allow']\").element('tbody').all('tr').element_by(has text 2722).element(\"[data-component='Actions']\"): click", "status": "passed", "start": 1703165900403, "stop": 1703165901564}, {"name": "element(\"[data-testid='modal-toggle-state-showEditPrivileges']\"): click", "status": "passed", "start": 1703165901565, "stop": 1703165901658}, {"name": "element(\"[data-testid='modal-edit-privileges']\"): should be visible", "status": "passed", "start": 1703165901658, "stop": 1703165901683}, {"name": "check_privileges_are_selected", "status": "passed", "steps": [{"name": "all(\"[data-testid='group-privileges-item']\").element_by(has text Visa Issuance Service).element(\"input[data-testid='group-privileges-checkbox']\"): should be selected", "status": "passed", "start": 1703165901683, "stop": 1703165901730}, {"name": "all(\"[data-testid='group-privileges-item']\").element_by(has text Visa Issuance Service).element(\"input[data-testid='group-privileges-checkbox']\"): should be enabled", "status": "passed", "start": 1703165901730, "stop": 1703165901767}, {"name": "all(\"[data-testid='group-privileges-item']\").element_by(has text Wage Disbursement).element(\"input[data-testid='group-privileges-checkbox']\"): should be selected", "status": "passed", "start": 1703165901768, "stop": 1703165901806}, {"name": "all(\"[data-testid='group-privileges-item']\").element_by(has text Wage Disbursement).element(\"input[data-testid='group-privileges-checkbox']\"): should be enabled", "status": "passed", "start": 1703165901806, "stop": 1703165901842}], "parameters": [{"name": "privilege_names", "value": "['Visa Issuance Service', 'Wage Disbursement']"}, {"name": "active_state", "value": "True"}], "start": 1703165901683, "stop": 1703165901842}], "parameters": [{"name": "establishment", "value": "'2722'"}], "start": 1703165900306, "stop": 1703165901842}, {"name": "[200] GET /api/bff/users/1070111305/establishments?active=True", "status": "passed", "attachments": [{"name": "JSON Response body", "source": "445165ae-bedb-4730-9da4-f88fc77f579c-attachment.json", "type": "application/json"}], "start": 1703165902014, "stop": 1703165902015}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165902015, "stop": 1703165902015}, {"name": "patch_remove_establishment_from_user", "status": "passed", "steps": [{"name": "[200] PATCH /api/bff/users/1070111305/establishments", "status": "passed", "attachments": [{"name": "JSON Request body", "source": "52965d15-e3ba-4b4e-95f3-8ef39e3b16bc-attachment.json", "type": "application/json"}], "start": 1703165902208, "stop": 1703165902210}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165902211, "stop": 1703165902211}], "parameters": [{"name": "cookie", "value": "{'user-id': '1666054', 'user-personal-number': '1001530987', 'exp': 1784759999, 'company-sequence-number': '11871', 'company-labor-office-id': '9', 'permissions': {'subscription_service': True}}"}, {"name": "users_personal_number", "value": "'1070111305'"}, {"name": "labor_office_id", "value": "'1'"}, {"name": "sequence_number", "value": "'1910'"}], "start": 1703165902015, "stop": 1703165902211}, {"name": "[200] GET /api/bff/users/1070111305/establishments?active=True", "status": "passed", "attachments": [{"name": "JSON Response body", "source": "2bb2d9db-63c2-421a-a5e1-7a215b9683dc-attachment.json", "type": "application/json"}], "start": 1703165902386, "stop": 1703165902388}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165902388, "stop": 1703165902388}, {"name": "patch_remove_establishment_from_user", "status": "passed", "steps": [{"name": "[200] PATCH /api/bff/users/1070111305/establishments", "status": "passed", "attachments": [{"name": "JSON Request body", "source": "d918885d-4c41-4569-8da7-e71e782373f9-attachment.json", "type": "application/json"}], "start": 1703165902599, "stop": 1703165902601}, {"name": "Assert that status_code equals 200", "status": "passed", "start": 1703165902601, "stop": 1703165902601}], "parameters": [{"name": "cookie", "value": "{'user-id': '1666054', 'user-personal-number': '1001530987', 'exp': 1784759999, 'company-sequence-number': '11871', 'company-labor-office-id': '9', 'permissions': {'subscription_service': True}}"}, {"name": "users_personal_number", "value": "'1070111305'"}, {"name": "labor_office_id", "value": "'15'"}, {"name": "sequence_number", "value": "'2722'"}], "start": 1703165902389, "stop": 1703165902602}], "start": 1703165870289, "stop": 1703165902607, "uuid": "feb2efd1-afc6-423f-bb24-5d35a2095688", "historyId": "a629f65e17f3e588f9e9720f51dc7b12", "testCaseId": "a629f65e17f3e588f9e9720f51dc7b12", "fullName": "tests.ui.user_management.test_user_management#test_add_access_to_establishment", "labels": [{"name": "parentSuite", "value": "tests.ui.user_management"}, {"name": "suite", "value": "test_user_management"}, {"name": "host", "value": "Macbook-Pro-Flora.local"}, {"name": "thread", "value": "54235-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.ui.user_management.test_user_management"}], "links": [{"type": "tms", "url": "https://qiwa.testmo.net/repositories/26?case_id=7928", "name": "Testmo test case (7928)"}, {"type": "tms", "url": "https://qiwa.testmo.net/repositories/26?case_id=7932", "name": "Testmo test case (7932)"}]}